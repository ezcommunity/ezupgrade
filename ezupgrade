#!/usr/bin/php
<?php

include_once( "classes/ezupgrade.php" );
$upgrade = new eZUpgrade;
$account 	 = $argv[1];

if ( $account == '' )
{
	$upgrade->describeUsage();
	exit();
}

$fromVersion 	= $upgrade->cfg->getSetting( 'account', 'Account_'.$account, 'FromVersion');
$toVersion		= $upgrade->cfg->getSetting( 'account', 'Account_'.$account, 'ToVersion');
$basePath		= $upgrade->cfg->getSetting( 'account', 'Account_'.$account, 'BasePath');
$oldFolder		= $upgrade->cfg->getSetting( 'account', 'Account_'.$account, 'OldInstallFolderName');
$newFolder		= $upgrade->cfg->getSetting( 'account', 'Account_'.$account, 'NewInstallFolderName');

$data = array(	'upgrade_from_version'  => $fromVersion, 
				'upgrade_to_version' 	=> $toVersion, 
				'upgrade_base_path'		=> $basePath, 
				'account_name'			=> $account,
				'old_folder_name'		=> $oldFolder,
				'new_folder_name'		=> $newFolder );

var_dump( $data );
if ( $upgrade->checkParamsBeforeRunning( $data ) )
{
	$upgrade->setUpgradeData($data);
	$upgrade->run();
}
else
{
	echo 'error';
}


?>